/*!
 * layoutkit.js
 * レイアウトをHTMLのクラスや属性の指定のみで容易に行うためのツール
 *
 * updated 2016/02/07
 *
 * (C)2015-2016 SHINGI Corporation.
 */
$(function(){$("body[data-devidable-by-device]").each(function(){var a=navigator.userAgent;-1!=a.search(/iPhone|Android.*,*.Mobile|Blackberry|IEMobile/)?$(".wrapper").addClass("mobile").removeClass("tablet").removeClass("pc"):-1!=a.search(/iPad|Android|Kindle|Silk/)?$(".wrapper").removeClass("mobile").addClass("tablet").removeClass("pc"):$(".wrapper").removeClass("mobile").removeClass("tablet").addClass("pc");var e=$(this).data("devidableByDevice");e||(settins="mobile=mobile-view,tablet=tablet-view");for(var t=e.split(","),i=t.length,r=0;i>r;r++){var s=t[r].split("="),n=$.trim(s[0]),d=$.trim(s[1]);$(".wrapper").data("devidable-by-device-"+n,d)}}),$("body[data-devidable-by-width]").each(function(){for(var a=$(this).data("devidableByWidth"),e=[],t=a.split(","),i=t.length,r=0;i>r;r++){var s,n=t[r].split("="),d=$.trim(n[0]);s=1==n.length?1e4:$.trim(n[1])-0,e.push({name:d,width:s})}e=e.sort(function(a,e){var t=a.width,i=e.width;return i-0>t-0?-1:t-0==i-0?0:1}),$(".wrapper").data("devidable-by-width-settings",e)}),$.layoutkitDevidableByWidth(),$.layoutkitChangeable(),$(".hoverable").each(function(){var a=$(this).attr("src");$(this).data("hoverable-src",a)}),$(".hoverable").each(function(){var a=function(a){var e=null;if(!a.hasClass("changeable"))return a.data("hoverable-src");for(var t=a.get(0).attributes,i=0;i<t.length;i++)if(/^data-src-.*/.test(t[i].name)){var r=t[i].name.substring(9);if($(".wrapper").hasClass(r))return e=t[i].value}return""},e=function(a){var e=a.data("hoverable-view");if(!e)return!0;var t=e.split(",");console.log(t);for(var i=t.length,r=0;i>r;r++)if(console.log("target_views[i]={"+t[r]+"}"),$(".wrapper").hasClass(t[r]))return!0;return!1};$(this).hover(function(){if(e($(this))){var t=a($(this)),i="."+t.split(".").pop(),r=t.substr(0,t.length-i.length);$(this).attr("src",r+"-on"+i)}},function(){if(e($(this))){var t=a($(this));$(this).attr("src",t)}})});var a=function(e,t){var i=t.index(),r=$(e).children().length;i++,r>i||(i=0);var s=$(e).children(":nth-child("+(i+1)+")"),n=s.data("fadable-delay");n||(n="5000");var d=parseInt(n),l=s.data("fadable-duration");l||(l="2000");var o=parseInt(l);t.fadeOut(o),s.fadeIn(o,function(){setTimeout(function(){a(e,s)},d)})};$(".fadable").each(function(){$(this).css("position","relative"),$(this).children().each(function(a){$(this).css({position:"absolute",display:0==a?"block":"none"})});var e=$(this).children(":first"),t=e.data("fadable-delay");t||(t="5000");var i=parseInt(t),r=$(this);setTimeout(function(){a(r,e)},i)})}),$.layoutkitDevidableByWidth=function(){$("body[data-devidable-by-width]").each(function(){var a=$(this).data("devidableByWidthCallback");if(a){var e=$[a]($(this));if(e)return}for(var t=$(".wrapper").data("devidable-by-width-settings"),i=0;i<t.length;i++)$(".wrapper").removeClass(t[i].name);if($(".wrapper").hasClass("mobile")){var r=$(".wrapper").data("devidable-by-device-mobile");if(r)return void $(".wrapper").addClass(r)}else if($(".wrapper").hasClass("tablet")){var r=$(".wrapper").data("devidable-by-device-tablet");if(r)return void $(".wrapper").addClass(r)}else if($(".wrapper").hasClass("pc")){var r=$(".wrapper").data("devidable-by-device-pc");if(r)return void $(".wrapper").addClass(r)}for(var s=window.innerWidth?window.innerWidth:$(window).width(),i=0;i<t.length;i++)if(s<=t[i].width-0){$(".wrapper").addClass(t[i].name);break}})},$.layoutkitChangeable=function(){$(".changeable").each(function(){for(var a=$(this).get(0).attributes,e=0;e<a.length;e++)if(/^data-src-.*/.test(a[e].name)){var t=a[e].name.substring(9);if($(".wrapper").hasClass(t)){$(this).attr("src",a[e].value);break}}})},$(window).load(function(){$(window).resize()}),$(window).resize(function(){$.layoutkitDevidableByWidth(),$.layoutkitChangeable(),$(".window-percentagable").each(function(){for(var a=$(this).get(0).attributes,e=0;e<a.length;e++)if(/^data-width-.*/.test(a[e].name)){var t=a[e].name.substring(11);if($(".wrapper").hasClass(t)){var i=a[e].value,r=i.match(/([0-9.]+)px$/);if(null!=r)return void $(this).outerWidth(r[1]);var s=i.match(/([0-9.]+)%$/);if(null!=s){var n=$(window).width(),d=s[1]/100;return void $(this).outerWidth(n*d)}var l=i.match(/[0-9.]+/);if(null!=l){var n=$(window).width(),d=l[0];return void $(this).outerWidth(n*d)}window.console&&console.log("Invalid attribute {data-width-"+t+"="+i+"}")}}}),$(".followable-height").each(function(){var a,e=$(this).data("follow");a="prev"==e?$(this).prev():$(this).parent(),$(this).outerHeight(a.outerHeight())})});